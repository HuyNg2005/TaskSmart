(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{409:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>em});var s=a(4114),r=a(826),l=a(636),d=a(4756),n=a(7507),i=a(1448),o=a(5457),c=a(6485),x=a(7555),m=a(1447),u=a(2248),g=a(930),h=a(5073),p=a(4437);function b(e){let{...t}=e;return(0,s.jsx)(m.bL,{"data-slot":"select",...t})}function j(e){let{...t}=e;return(0,s.jsx)(m.WT,{"data-slot":"select-value",...t})}function f(e){let{className:t,size:a="default",children:r,...l}=e;return(0,s.jsxs)(m.l9,{"data-slot":"select-trigger","data-size":a,className:(0,p.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[r,(0,s.jsx)(m.In,{asChild:!0,children:(0,s.jsx)(u.A,{className:"size-4 opacity-50"})})]})}function k(e){let{className:t,children:a,position:r="popper",align:l="center",...d}=e;return(0,s.jsx)(m.ZL,{children:(0,s.jsxs)(m.UC,{"data-slot":"select-content",className:(0,p.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,align:l,...d,children:[(0,s.jsx)(N,{}),(0,s.jsx)(m.LM,{className:(0,p.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(y,{})]})})}function v(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(m.q7,{"data-slot":"select-item",className:(0,p.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(m.VF,{children:(0,s.jsx)(g.A,{className:"size-4"})})}),(0,s.jsx)(m.p4,{children:a})]})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(m.PP,{"data-slot":"select-scroll-up-button",className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(h.A,{className:"size-4"})})}function y(e){let{className:t,...a}=e;return(0,s.jsx)(m.wn,{"data-slot":"select-scroll-down-button",className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(u.A,{className:"size-4"})})}var w=a(9780),D=a(7999),S=a(4829),I=a(6607);function C(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,p.cn)("w-full caption-bottom text-sm",t),...a})})}function O(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,p.cn)("[&_tr]:border-b",t),...a})}function E(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,p.cn)("[&_tr:last-child]:border-0",t),...a})}function _(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,p.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function z(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,p.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function A(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,p.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var T=a(1049),P=a(9762);function G(e){let{className:t,...a}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,p.cn)("mx-auto flex w-full justify-center",t),...a})}function R(e){let{className:t,...a}=e;return(0,s.jsx)("ul",{"data-slot":"pagination-content",className:(0,p.cn)("flex flex-row items-center gap-1",t),...a})}function Z(e){let{className:t,isActive:a,size:r="icon",...l}=e;return(0,s.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:(0,p.cn)((0,c.r)({variant:a?"outline":"ghost",size:r}),t),...l})}function M(e){let{className:t,...a}=e;return(0,s.jsxs)(Z,{"aria-label":"Go to previous page",size:"default",className:(0,p.cn)("gap-1 px-2.5 sm:pl-2.5",t),...a,children:[(0,s.jsx)(T.A,{}),(0,s.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function L(e){let{className:t,...a}=e;return(0,s.jsxs)(Z,{"aria-label":"Go to next page",size:"default",className:(0,p.cn)("gap-1 px-2.5 sm:pr-2.5",t),...a,children:[(0,s.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,s.jsx)(P.A,{})]})}var $=a(2859),B=a(5115);function Y(e){let{delayDuration:t=0,...a}=e;return(0,s.jsx)(B.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function W(e){let{...t}=e;return(0,s.jsx)(Y,{children:(0,s.jsx)(B.bL,{"data-slot":"tooltip",...t})})}function V(e){let{...t}=e;return(0,s.jsx)(B.l9,{"data-slot":"tooltip-trigger",...t})}function U(e){let{className:t,sideOffset:a=0,children:r,...l}=e;return(0,s.jsx)(B.ZL,{children:(0,s.jsxs)(B.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,p.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...l,children:[r,(0,s.jsx)(B.i3,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var F=a(8842),K=a(1644),q=a(5258),H=a(9483),J=a(4345),Q=a(8598),X=a(2544),ee=a(8188),et=a(4220),ea=a(3536),es=a(1100),er=a(5294),el=a(1777);function ed(e){let{task:t,previewMode:a=!1,onClick:r}=e,{attributes:l,listeners:d,setNodeRef:n,transform:i,transition:o,isDragging:c}=(0,er.gl)({id:t.id}),x={transform:el.Ks.Transform.toString(i),transition:o,opacity:c?.5:1};return(0,s.jsx)("div",{ref:n,style:x,...l,...d,onClick:()=>!a&&(null==r?void 0:r(t)),children:(0,s.jsxs)(I.Zp,{className:"border border-slate-200 dark:border-gray-700 hover:border-emerald-300 dark:hover:border-emerald-600 hover:shadow-md dark:hover:shadow-emerald-500/10 transition-all cursor-grab active:cursor-grabbing bg-white dark:bg-gray-900",children:[(0,s.jsx)(I.aR,{className:"p-3 pb-2",children:(0,s.jsx)(I.ZB,{className:"text-3xl font-semibold text-slate-900 dark:text-white leading-snug line-clamp-2",children:t.title})}),(0,s.jsxs)(I.Wu,{className:"p-3 pt-0 space-y-2",children:[t.description&&(0,s.jsx)("p",{className:"text-xs text-slate-600 dark:text-gray-400 line-clamp-2",children:t.description}),t.assignees&&t.assignees.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[t.assignees.slice(0,3).map(e=>(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-emerald-600 dark:bg-emerald-500 text-white flex items-center justify-center text-xs font-medium shadow-sm",title:e.name,children:e.name.charAt(0).toUpperCase()},e.id)),t.assignees.length>3&&(0,s.jsxs)("div",{className:"w-6 h-6 rounded-full bg-slate-300 dark:bg-gray-700 text-slate-700 dark:text-gray-300 flex items-center justify-center text-xs font-medium shadow-sm",children:["+",t.assignees.length-3]})]})]})]})})}let en={TODO:"To Do",IN_PROGRESS:"In Progress",DONE:"Done"},ei={TODO:"bg-slate-100 dark:bg-gray-800 border-slate-200 dark:border-gray-700",IN_PROGRESS:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-900/50",DONE:"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-900/50"};function eo(e){let{status:t,tasks:a,onEdit:r,onDelete:l}=e,{setNodeRef:d,isOver:n}=(0,es.zM)({id:t});return(0,s.jsxs)(I.Zp,{className:"".concat(ei[t]," border shadow-sm transition-all ").concat(n?"ring-2 ring-emerald-400 dark:ring-emerald-500":""),children:[(0,s.jsx)(I.aR,{className:"py-2 px-3",children:(0,s.jsxs)(I.ZB,{className:"text-sm font-semibold text-slate-900 dark:text-white flex items-center justify-between",children:[(0,s.jsx)("span",{children:en[t]}),(0,s.jsx)("span",{className:"text-xs font-normal text-slate-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full",suppressHydrationWarning:!0,children:a.length})]})}),(0,s.jsx)(I.Wu,{ref:d,className:"space-y-2 min-h-[180px] max-h-[420px] overflow-y-auto px-2 pb-2",children:a.length>0?a.map(e=>(0,s.jsx)(ed,{task:e,onClick:()=>null==r?void 0:r(e)},e.id)):(0,s.jsx)("div",{className:"flex items-center justify-center h-24",children:(0,s.jsx)("p",{className:"text-slate-400 dark:text-gray-600 text-xs italic",children:"No tasks"})})})]})}function ec(e){let{tasks:t,onEdit:a,onStatusChange:l,onDelete:d}=e,[n,i]=(0,r.useState)(null),o=(0,es.FR)((0,es.MS)(es.AN,{activationConstraint:{distance:8}})),c=t.filter(e=>"TODO"===e.status),x=t.filter(e=>"IN_PROGRESS"===e.status),m=t.filter(e=>"DONE"===e.status);return(0,s.jsxs)(es.Mp,{sensors:o,collisionDetection:es.fp,onDragStart:e=>{var a;let{active:s}=e;i(null!=(a=t.find(e=>e.id===s.id))?a:null)},onDragEnd:e=>{let{active:a,over:s}=e;if(i(null),!s)return;let r=t.find(e=>e.id===a.id);if(!r)return;let d=r.status;if(["TODO","IN_PROGRESS","DONE"].includes(s.id))d=s.id;else{let e=t.find(e=>e.id===s.id);e&&(d=e.status)}d&&d!==r.status&&((0,et.km)(r.id,{status:d}),null==l||l(r.id,d))},children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsx)(er.gB,{items:c.map(e=>e.id),strategy:er._G,children:(0,s.jsx)(eo,{status:"TODO",tasks:c,onEdit:a,onDelete:d})}),(0,s.jsx)(er.gB,{items:x.map(e=>e.id),strategy:er._G,children:(0,s.jsx)(eo,{status:"IN_PROGRESS",tasks:x,onEdit:a,onDelete:d})}),(0,s.jsx)(er.gB,{items:m.map(e=>e.id),strategy:er._G,children:(0,s.jsx)(eo,{status:"DONE",tasks:m,onEdit:a,onDelete:d})})]}),(0,s.jsx)(es.Hd,{children:n?(0,s.jsx)(I.Zp,{className:"p-0 shadow-2xl border-2 border-emerald-400 dark:border-emerald-500 bg-white dark:bg-gray-900 rotate-3 scale-105",children:(0,s.jsx)(ed,{task:n,previewMode:!0})}):null})]})}let ex=d.Ik({title:d.Yj().min(1),description:d.Yj().optional(),projectId:d.Yj().min(1),dueDate:d.p6().optional(),assigneeId:d.Yj().optional(),status:d.k5(["TODO","IN_PROGRESS","DONE"])});function em(){var e,t,a;let[d,m]=(0,r.useState)(()=>(0,et.Y8)()),[u,g]=(0,r.useState)(()=>(0,ea.GZ)()),[h,p]=(0,r.useState)(null),[N,y]=(0,r.useState)(null),[T,P]=(0,r.useState)(""),[Z]=(0,r.useState)("created"),[B,es]=(0,r.useState)(1),[er,el]=(0,r.useState)("1"),[ed,en]=(0,r.useState)(!1),[ei,eo]=(0,r.useState)(!1),[em,eu]=(0,r.useState)(null),eg=(0,ee.j)(e=>e.activeProjectId),{register:eh,handleSubmit:ep,control:eb,reset:ej,watch:ef}=(0,l.mN)({resolver:(0,n.u)(ex),defaultValues:{title:"",description:"",projectId:null!=eg?eg:null!=(t=null==(e=u[0])?void 0:e.id)?t:"",dueDate:void 0,assigneeId:void 0,status:"TODO"}}),ek=ef("projectId");(0,r.useEffect)(()=>{g((0,ea.GZ)()),m((0,et.Y8)())},[]),(0,r.useEffect)(()=>{var e,t,a;h?(ej({title:h.title,description:h.description,projectId:h.projectId,dueDate:h.dueDate?new Date(h.dueDate):void 0,assigneeId:null==(e=h.assignees[0])?void 0:e.id,status:h.status}),en(!0)):ej({title:"",description:"",projectId:null!=eg?eg:null!=(a=null==(t=u[0])?void 0:t.id)?a:"",dueDate:void 0,assigneeId:void 0,status:"TODO"})},[h,eg,u,ej]);let ev=()=>{g((0,ea.GZ)()),m((0,et.Y8)())},eN=e=>{eu(e),eo(!0)},ey=(0,r.useMemo)(()=>{let e=d.slice();return eg&&(e=e.filter(e=>e.projectId===eg)),T&&(e=e.filter(e=>{var t;return e.title.toLowerCase().includes(T.toLowerCase())||(null!=(t=e.description)?t:"").toLowerCase().includes(T.toLowerCase())})),N&&(e=e.filter(e=>e.status===N)),"title"===Z&&e.sort((e,t)=>e.title.localeCompare(t.title)),"due"===Z&&e.sort((e,t)=>(e.dueDate||"")>(t.dueDate||"")?1:-1),"created"===Z&&e.sort((e,t)=>e.createdAt>t.createdAt?-1:1),e},[d,eg,T,N,Z]),ew=Math.max(1,Math.ceil(ey.length/5));(0,r.useEffect)(()=>{B>ew&&es(ew),el(String(B))},[ew,B]);let eD=ey.slice((B-1)*5,5*B),eS=u.find(e=>{var t;return e.id===(ek||eg||(null==(t=u[0])?void 0:t.id))}),eI=null!=(a=null==eS?void 0:eS.members)?a:[];return(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 dark:bg-gray-950 p-4 sm:p-6 lg:p-8 transition-colors",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white text-center sm:text-left",children:"Tasks"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400 mt-1 text-center sm:text-left",children:"Manage your tasks efficiently"})]}),(0,s.jsx)(Y,{children:(0,s.jsxs)(S.lG,{open:ed,onOpenChange:e=>{e||(p(null),ej()),en(e)},children:[(0,s.jsx)(S.zM,{asChild:!0,children:(0,s.jsxs)(c.$,{className:"bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 w-full sm:w-auto",onClick:()=>{p(null),ej(),en(!0)},children:[(0,s.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"New Task"]})}),(0,s.jsxs)(S.Cf,{className:"max-w-md max-h-[90vh] overflow-y-auto dark:bg-gray-900 dark:border-gray-800",children:[(0,s.jsx)(S.c7,{children:(0,s.jsx)(S.L3,{className:"text-xl font-bold dark:text-white",children:h?"Update Task":"New Task"})}),(0,s.jsxs)("form",{onSubmit:ep(e=>{var t,a,s,r;if(e.dueDate&&(0,i.Y)(e.dueDate,new Date))return void $.o.error("Due date cannot be in the past");let l=u.find(t=>t.id===e.projectId);if(e.dueDate&&(null==l?void 0:l.deadline)){let t=new Date(l.deadline);if(e.dueDate>t)return void $.o.error("Task due date cannot be after project deadline")}if(h){let s=e.assigneeId&&!h.assignees.some(t=>t.id===e.assigneeId)?[...h.assignees,{id:e.assigneeId,name:null!=(a=null==l||null==(t=l.members.find(t=>t.id===e.assigneeId))?void 0:t.name)?a:""}]:h.assignees;(0,et.km)(h.id,{title:e.title,description:e.description,projectId:e.projectId,dueDate:e.dueDate?e.dueDate.toISOString():void 0,assignees:s,status:h.status}),$.o.success("Task updated"),p(null),en(!1)}else{let t=new Date().toISOString(),a={id:"task-".concat(Date.now()),title:e.title,description:e.description,status:e.status,createdAt:t,dueDate:e.dueDate?e.dueDate.toISOString():void 0,projectId:e.projectId,assignees:e.assigneeId?[{id:e.assigneeId,name:null!=(r=null==l||null==(s=l.members.find(t=>t.id===e.assigneeId))?void 0:s.name)?r:""}]:[]};(0,et.iF)(a);let d=(0,ea.GZ)(),n=d.findIndex(t=>t.id===e.projectId);if(-1!==n){let e=d[n];e&&(e.tasks.push(a.id),localStorage.setItem("tbx:projects_v1",JSON.stringify(d)))}$.o.success("Task created"),en(!1)}ev(),ej()}),className:"space-y-4 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:"Project"}),(0,s.jsx)(l.xI,{control:eb,name:"projectId",render:e=>{let{field:t}=e;return(0,s.jsxs)(b,{value:t.value,onValueChange:t.onChange,children:[(0,s.jsx)(f,{className:"h-10 dark:bg-gray-800 dark:border-gray-700 dark:text-white",children:(0,s.jsx)(j,{placeholder:"Select project"})}),(0,s.jsx)(k,{className:"dark:bg-gray-900 dark:border-gray-800",children:u.map(e=>(0,s.jsx)(v,{value:e.id,className:"dark:text-white dark:focus:bg-gray-800",children:e.name},e.id))})]})}})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:"Title"}),(0,s.jsx)(x.p,{...eh("title"),placeholder:"Enter task title",className:"h-10 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder:text-gray-500"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:"Description"}),(0,s.jsx)(x.p,{...eh("description"),placeholder:"Enter description",className:"h-10 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder:text-gray-500"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:"Due Date"}),(0,s.jsx)(l.xI,{control:eb,name:"dueDate",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.AM,{children:[(0,s.jsx)(w.Wv,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",className:"w-full h-10 justify-start dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700",children:[(0,s.jsx)(K.A,{className:"mr-2 h-4 w-4"}),t.value?(0,o.GP)(t.value,"PPP"):"Select due date"]})}),(0,s.jsx)(w.hl,{className:"p-0 dark:bg-gray-900 dark:border-gray-800",align:"start",children:(0,s.jsx)(D.V,{mode:"single",selected:t.value,onSelect:e=>t.onChange(null!=e?e:void 0)})})]})}})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:"Assignee"}),(0,s.jsx)(l.xI,{control:eb,name:"assigneeId",render:e=>{let{field:t}=e;return(0,s.jsxs)(b,{value:t.value,onValueChange:t.onChange,children:[(0,s.jsx)(f,{className:"h-10 dark:bg-gray-800 dark:border-gray-700 dark:text-white",children:(0,s.jsx)(j,{placeholder:eI.length?"Select member":"No members"})}),(0,s.jsx)(k,{className:"dark:bg-gray-900 dark:border-gray-800",children:eI.length?eI.map(e=>(0,s.jsx)(v,{value:e.id,className:"dark:text-white dark:focus:bg-gray-800",children:e.name},e.id)):(0,s.jsx)("div",{className:"p-2 text-sm text-slate-500 dark:text-gray-400 text-center",children:"No members"})})]})}})]}),h&&h.assignees.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:"Current Assignees"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap p-3 bg-slate-100 dark:bg-gray-800 rounded-lg",children:h.assignees.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-gray-700 rounded-md border dark:border-gray-600 text-sm dark:text-gray-200",children:[(0,s.jsx)("span",{children:e.name}),(0,s.jsx)(c.$,{type:"button",variant:"ghost",size:"icon",className:"h-5 w-5 hover:bg-red-50 dark:hover:bg-red-900/50 hover:text-red-600 dark:hover:text-red-400 rounded-full",onClick:()=>((e,t)=>{let a=h||d.find(t=>t.id===e);if(!a)return;let s=a.assignees.filter(e=>e.id!==t);(0,et.km)(e,{assignees:s}),h&&h.id===e&&p({...h,assignees:s}),$.o.success("Member removed"),ev()})(h.id,e.id),children:(0,s.jsx)(q.A,{className:"h-3 w-3"})})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)(c.$,{variant:"outline",type:"button",className:"flex-1 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700",onClick:()=>{p(null),ej(),en(!1)},children:"Cancel"}),(0,s.jsx)(c.$,{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600",children:h?"Update":"Create"}),h&&(0,s.jsxs)(W,{children:[(0,s.jsx)(V,{asChild:!0,children:(0,s.jsxs)(c.$,{type:"button",variant:"destructive",className:"flex-1 dark:bg-red-900/50 dark:hover:bg-red-900 dark:border-red-800",onClick:()=>eN(h.id),children:[(0,s.jsx)(H.A,{className:"w-4 h-4 mr-2"}),"Delete"]})}),(0,s.jsx)(U,{children:(0,s.jsx)("p",{children:"Delete this task"})})]})]})]})]})]})}),(0,s.jsx)(S.lG,{open:ei,onOpenChange:eo,children:(0,s.jsxs)(S.Cf,{className:"dark:bg-gray-900 dark:border-gray-800",children:[(0,s.jsxs)(S.c7,{children:[(0,s.jsx)(S.L3,{className:"dark:text-white",children:"Confirm Delete"}),(0,s.jsx)(S.rr,{className:"dark:text-gray-400",children:"Are you sure you want to delete this task? This action cannot be undone."})]}),(0,s.jsxs)(S.Es,{children:[(0,s.jsx)(c.$,{variant:"outline",className:"dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700",onClick:()=>eo(!1),children:"Cancel"}),(0,s.jsx)(c.$,{variant:"destructive",className:"dark:bg-red-900/50 dark:hover:bg-red-900",onClick:()=>{if(!em)return;(null==h?void 0:h.id)===em&&(p(null),en(!1)),(0,et.e6)(em);let e=(0,ea.GZ)(),t=e.findIndex(e=>e.tasks.includes(em));if(-1!==t){let a=e[t];a&&(a.tasks=a.tasks.filter(e=>e!==em),localStorage.setItem("tbx:projects_v1",JSON.stringify(e)))}ev(),$.o.success("Task deleted"),eo(!1),eu(null)},children:"Delete"})]})]})})]}),(0,s.jsxs)(I.Zp,{className:"border border-slate-200 dark:border-gray-800 bg-white dark:bg-gray-900",children:[(0,s.jsx)(I.aR,{className:"border-b dark:border-gray-800",children:(0,s.jsxs)(I.ZB,{className:"text-lg font-semibold flex items-center gap-2 dark:text-white",children:[(0,s.jsx)(J.A,{className:"w-5 h-5"}),"Kanban Board"]})}),(0,s.jsx)(I.Wu,{className:"p-4",children:(0,s.jsx)("div",{className:"max-h-[500px] overflow-y-auto",children:(0,s.jsx)(ec,{tasks:ey,onStatusChange:(e,t)=>{(0,et.km)(e,{status:t}),ev()},onEdit:e=>{p(e)},onDelete:eN})})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(Q.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 dark:text-gray-500"}),(0,s.jsx)(x.p,{placeholder:"Search tasks...",value:T,onChange:e=>{P(e.target.value),es(1)},className:"pl-10 h-10 dark:bg-gray-900 dark:border-gray-800 dark:text-white dark:placeholder:text-gray-500"})]}),(0,s.jsxs)(b,{value:null!=N?N:"all",onValueChange:e=>y("all"===e?null:e),children:[(0,s.jsxs)(f,{className:"w-full sm:w-40 h-10 dark:bg-gray-900 dark:border-gray-800 dark:text-white",children:[(0,s.jsx)(X.A,{className:"w-4 h-4 mr-2"}),(0,s.jsx)(j,{placeholder:"Status"})]}),(0,s.jsxs)(k,{className:"dark:bg-gray-900 dark:border-gray-800",children:[(0,s.jsx)(v,{value:"all",className:"dark:text-white dark:focus:bg-gray-800",children:"All Status"}),(0,s.jsx)(v,{value:"TODO",className:"dark:text-white dark:focus:bg-gray-800",children:"TODO"}),(0,s.jsx)(v,{value:"IN_PROGRESS",className:"dark:text-white dark:focus:bg-gray-800",children:"In Progress"}),(0,s.jsx)(v,{value:"DONE",className:"dark:text-white dark:focus:bg-gray-800",children:"Done"})]})]})]}),(0,s.jsxs)(I.Zp,{className:"border border-slate-200 dark:border-gray-800 bg-white dark:bg-gray-900",children:[(0,s.jsx)(I.aR,{className:"border-b dark:border-gray-800",children:(0,s.jsx)(I.ZB,{className:"text-lg font-semibold dark:text-white",children:"Task List"})}),(0,s.jsxs)(I.Wu,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(C,{children:[(0,s.jsx)(O,{children:(0,s.jsxs)(_,{className:"border-b border-slate-200 dark:border-gray-800",children:[(0,s.jsx)(z,{className:"font-semibold dark:text-gray-300",children:"Title"}),(0,s.jsx)(z,{className:"font-semibold hidden md:table-cell dark:text-gray-300",children:"Project"}),(0,s.jsx)(z,{className:"font-semibold dark:text-gray-300",children:"Status"}),(0,s.jsx)(z,{className:"font-semibold hidden sm:table-cell dark:text-gray-300",children:"Due Date"}),(0,s.jsx)(z,{className:"font-semibold text-right dark:text-gray-300",children:"Actions"})]})}),(0,s.jsx)(E,{children:eD.map(e=>{var t,a,r;return(0,s.jsxs)(_,{className:"border-b border-slate-200 dark:border-gray-800",children:[(0,s.jsxs)(A,{children:[(0,s.jsx)("div",{className:"font-medium text-sm dark:text-white",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-slate-500 dark:text-gray-400 line-clamp-1",children:null!=(a=e.description)?a:""})]}),(0,s.jsx)(A,{className:"text-sm hidden md:table-cell dark:text-gray-300",children:null!=(r=null==(t=u.find(t=>t.id===e.projectId))?void 0:t.name)?r:"—"}),(0,s.jsx)(A,{children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium ".concat("DONE"===e.status?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"IN_PROGRESS"===e.status?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-slate-100 dark:bg-gray-800 text-slate-700 dark:text-gray-300"),children:e.status})}),(0,s.jsx)(A,{className:"text-sm hidden sm:table-cell dark:text-gray-300",children:e.dueDate?(0,o.GP)(new Date(e.dueDate),"PP"):"—"}),(0,s.jsx)(A,{children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(c.$,{variant:"outline",size:"sm",className:"dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700",onClick:()=>{p(e),en(!0)},children:"Edit"}),(0,s.jsx)(Y,{children:(0,s.jsxs)(W,{children:[(0,s.jsx)(V,{asChild:!0,children:(0,s.jsx)(c.$,{variant:"destructive",size:"sm",className:"dark:bg-red-900/50 dark:hover:bg-red-900 dark:border-red-800",onClick:()=>eN(e.id),children:"Delete"})}),(0,s.jsx)(U,{children:(0,s.jsx)("p",{children:"Delete this task"})})]})})]})})]},e.id)})})]})}),0===ey.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(J.A,{className:"w-12 h-12 text-slate-300 dark:text-gray-700 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-gray-400",children:"No tasks found"})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col sm:flex-row justify-between items-center gap-4 border-t border-slate-200 dark:border-gray-800",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-600 dark:text-gray-400",children:["Showing ",ey.length>0?(B-1)*5+1:0," to ",Math.min(5*B,ey.length)," of ",ey.length," tasks"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(G,{children:(0,s.jsx)(R,{children:(0,s.jsx)(M,{onClick:()=>es(e=>Math.max(1,e-1)),className:1===B?"pointer-events-none opacity-50":"cursor-pointer dark:text-white dark:hover:bg-gray-800"})})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.p,{type:"number",min:1,max:ew,value:er,onChange:e=>(e=>{el(e);let t=parseInt(e);!isNaN(t)&&t>=1&&t<=ew&&es(t)})(e.target.value),onBlur:()=>el(String(B)),className:"w-16 h-9 text-center text-sm dark:bg-gray-900 dark:border-gray-800 dark:text-white"}),(0,s.jsxs)("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:["/",ew]})]}),(0,s.jsx)(G,{children:(0,s.jsx)(R,{children:(0,s.jsx)(L,{onClick:()=>es(e=>Math.min(ew,e+1)),className:B===ew?"pointer-events-none opacity-50":"cursor-pointer dark:text-white dark:hover:bg-gray-800"})})})]})]})]})]})]})})}},9936:(e,t,a)=>{Promise.resolve().then(a.bind(a,409))}},e=>{e.O(0,[367,140,167,110,560,667,919,142,358],()=>e(e.s=9936)),_N_E=e.O()}]);